<MudGrid>
<MudTable Items="@creatures" Dense="true" Hover="true" Bordered="true" Striped="true" @bind-SelectedItem="selectedItem">
    <HeaderContent>
        <MudTh></MudTh>
        <MudTh>Name</MudTh>
        <MudTh>CR</MudTh>
        <MudTh>HP</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd><MudButton Variant="Variant.Outlined" Size="Size.Small" OnClick="@(() => DeleteCreature(context))"> Delete</MudButton></MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="CR">@context.cr</MudTd>
        <MudTd DataLabel="HP">@context.HpText</MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>
</MudGrid>
@code {
    @page "/creatures"
    @using DMPowerTools.Data;
    @using Microsoft.EntityFrameworkCore;
    @inject ApplicationDbContext DBContext;

    private Creature selectedItem = null;
    private List<Creature> creatures;

    protected override async Task OnInitializedAsync()
    {
        creatures = DBContext.Creatures.Include(c=> c.Abilities).Include(i=>i.Actions).Include(s=>s.Skills).ToList();
    }
    private void DeleteCreature(Creature c)
    {
        DBContext.Creatures.Remove(c);
        DBContext.SaveChanges();
    }
}

